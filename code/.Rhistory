rm(list=ls())
library(plyr)
library(XML)
library(lubridate)
library(maps)
source("tables.R")
donnees_2016 <- xmlToList("C:/Users/wissem bbm/Documents/Stage/Ressources/donnees/PrixCarburants_annuel_2016")
donnees_2016 <- xmlToList("C:/Users/wissem bbm/Documents/Stage/Ressources/donnees/PrixCarburants_annuel_2016.xml")
View(spatial_year(donnees_2016))
donnees_2016[[1]]$services
donnees_2016[[1]]$services[1]
donnees_2016[[1]]$services[2]
length(donnees_2016[[1]]$services)
B<- spatial_year(donnees_2016)
idx=which((B$lon>(-10))&(B$lon<20)&(B$lat>35)&(B$lat<55))
B=B[idx,]
Q=quantile(B$Prix,seq(0,1,by=.01),na.rm=TRUE)
Q[1]=0
x=as.numeric(cut(B$Prix,breaks=unique(Q)))
CL=c(rgb(0,0,1,seq(1,0,by=-.025)),rgb(1,0,0,seq(0,1,by=.025)))
plot(B$lon,B$lat,pch=19,col=CL[x])
plot(B$lon,B$lat,pch=19,col=CL[x],cex=0.05)
map("France")
map("france")
library(maps)
map("france")
points(B$lon,B$lat,pch =20,col=CL[x],cex=0.05)
map("france")
points(B$lon,B$lat,pch =19,col=CL[x],cex=0.05)
rm(list=ls())
library(plyr)
library(XML)
library(lubridate)
library(maps)
source("tables.R")
donnees_2011 <- xmlToList("C:/Users/wissem bbm/Documents/Stage/Ressources/donnees/PrixCarburants_annuel_2011.xml")
View(spatial_year(donnees_2011))
source("tables.R")
View(spatial_year(donnees_2011))
rm(list=ls())
library(plyr)
library(XML)
library(lubridate)
library(maps)
source("tables.R")
donnees_2011 <- xmlToList("C:/Users/wissem bbm/Documents/Stage/Ressources/donnees/PrixCarburants_annuel_2011.xml")
View(spatial_year(donnees_2011))
View(fermeture(donnees_2011))
View(stock(donnees_2011))
View(Price_update(donnees_2011,2))
B<- spatial_year(donnees_2016)
idx=which((B$lon>(-10))&(B$lon<20)&(B$lat>35)&(B$lat<55))
B=B[idx,]
Q=quantile(B$Prix,seq(0,1,by=.01),na.rm=TRUE)
Q[1]=0
x=as.numeric(cut(B$Prix,breaks=unique(Q)))
CL=c(rgb(0,0,1,seq(1,0,by=-.025)),rgb(1,0,0,seq(0,1,by=.025)))
plot(B$lon,B$lat,pch=19,col=CL[x],cex=0.05)
B<- spatial_year(donnees_2011)
idx=which((B$lon>(-10))&(B$lon<20)&(B$lat>35)&(B$lat<55))
B=B[idx,]
Q=quantile(B$Prix,seq(0,1,by=.01),na.rm=TRUE)
Q[1]=0
x=as.numeric(cut(B$Prix,breaks=unique(Q)))
CL=c(rgb(0,0,1,seq(1,0,by=-.025)),rgb(1,0,0,seq(0,1,by=.025)))
plot(B$lon,B$lat,pch=19,col=CL[x],cex=0.05)
map("france")
points(B$lon,B$lat,pch =19,col=CL[x],cex=0.05)
rm(list=ls())
library(readxl)
library(readxl)
Prix_mensuel_2007_2021 <- read_excel("~/Stage/Ressources/donnees/Brent/Prix mensuel 2007-2021.xlsx")
View(Prix_mensuel_2007_2021)
brent <-read_excel("~/Stage/Ressources/donnees/Brent/Prix mensuel 2007-2021.xlsx")
TTC <-read_excel("~/Stage/Ressources/donnees/Données mensuelles 2007-2021/Prix_TTC.xlsx")
plot(brent$`Cours du Brent daté`,type = 'l',xaxt = "n",ylim = c(0.6,max(TTC$SP95)),col='Blue',ylab = 'prices',xlab = "")
axis(1, at = (1:length(brent$Date)),labels =brent$Date)
typeof(brent$`Cours du Brent daté`)
plot(brent$`Cours du Brent daté`,type = 'l',xaxt = "n",ylim = c(0.6,max(TTC$SP95)),col='Blue',ylab = 'prices',xlab = "")
plot(brent$`Cours du Brent daté`)
plot(brent$`Cours du Brent daté`,type ='l')
plot(brent$`Cours du Brent daté`,type ='l',xaxt = "n")
plot(brent$`Cours du Brent daté`,type = 'l',xaxt = "n",col='Blue',ylab = 'prices',xlab = "")
axis(1, at = (1:length(brent$Date)),labels =brent$Date)
brent <-read_excel("~/Stage/Ressources/donnees/Brent/Prix mensuel 2007-2021.xlsx")
plot(brent$`Cours du Brent daté`,type = 'l',xaxt = "n",col='Blue',ylab = 'prices',xlab = "")
axis(1, at = (1:length(TTC$Date)),labels =TTC$Date)
lines(x = TTC$SP95,col= 'Green')
brent <-read_excel("~/Stage/Ressources/donnees/Brent/Prix mensuel 2007-2021.xlsx")
plot(brent$`Cours du Brent daté`,type = 'l',xaxt = "n",col='Blue',ylab = 'Barel of brent price',xlab = "")
axis(1, at = (1:length(TTC$Date)),labels =TTC$Date)
brent <-read_excel("~/Stage/Ressources/donnees/Brent/Prix mensuel 2007-2021.xlsx")
plot(brent$`Cours du Brent daté`,type = 'l',xaxt = "n",col='Blue',ylab = 'Price of a barel of brent',xlab = "")
axis(1, at = (1:length(TTC$Date)),labels =TTC$Date)
map("france")
points(B$lon,B$lat,pch =19,col=CL[x],cex=0.05)
library(plyr)
library(XML)
library(lubridate)
library(maps)
map("france")
points(B$lon,B$lat,pch =19,col=CL[x],cex=0.05)
plot(B$lon,B$lat,pch=19,col=CL[x],cex=0.05)
View(spatial_year(donnees_2011))
View(fermeture(donnees_2011))
View(stock(donnees_2011))
View(Price_update(donnees_2011,2))
map("france")
points(B$lon,B$lat,pch =19,col=CL[x],cex=0.05)
donnees_2012 <- xmlToList("C:/Users/wissem bbm/Documents/Stage/Ressources/donnees/PrixCarburants_annuel_2012.xml")
B_2012 <- spatial_year(donnees_2012)
idx_2012=which((B_2012$lon>(-10))&(B_2012$lon<20)&(B_2012$lat>35)&(B_2012$lat<55))
B_2012=B_2012[idx_2012,]
Q=quantile(B_2012$Prix,seq(0,1,by=.01),na.rm=TRUE)
Q[1]=0
x_2012=as.numeric(cut(B$Prix,breaks=unique(Q)))
map("france")
points(B_2012$lon,B_2012$lat,pch =19,col=CL[x_2012],cex=0.05)
plot(B_2012$lon,B_2012$lat,pch=19,col=CL[x_2012],cex=0.05)
donnees_2018 <- xmlToList("C:/Users/wissem bbm/Documents/Stage/Ressources/donnees/PrixCarburants_annuel_2018.xml")
B_2018 <- spatial_year(donnees_2018)
idx_2018=which((B_2018$lon>(-10))&(B_2018$lon<20)&(B_2018$lat>35)&(B_2018$lat<55))
B_2018=B_2018[idx_2018,]
Q=quantile(B_2018$Prix,seq(0,1,by=.01),na.rm=TRUE)
Q[1]=0
x_2018=as.numeric(cut(B_2018$Prix,breaks=unique(Q)))
plot(B_2018$lon,B_2018$lat,pch=19,col=CL[x_2018],cex=0.05)
B_2018 <- spatial_year(donnees_2018)
B_2018 <- spatial_year(donnees_2012)
idx_2018=which((B_2018$lon>(-10))&(B_2018$lon<20)&(B_2018$lat>35)&(B_2018$lat<55))
B_2018=B_2018[idx_2018,]
Q=quantile(B_2018$Prix,seq(0,1,by=.01),na.rm=TRUE)
Q[1]=0
x_2018=as.numeric(cut(B_2018$Prix,breaks=unique(Q)))
plot(B_2018$lon,B_2018$lat,pch=19,col=CL[x_2018],cex=0.05)
map("france")
points(B_2012$lon,B_2012$lat,pch =19,col=CL[x_2012],cex=0.05)
map("france")
points(B_2018$lon,B_2018$lat,pch =19,col=CL[x_2018],cex=0.05)
B_2018 <- spatial_year(donnees_2018)
View(spatial_year(donnees_2018))
View(fermeture(donnees_2011))
View(fermeture(donnees_2018))
View(stock(donnees_2018))
B_2018 <- spatial_year(donnees_2018)
for (i in 1:50) {
print(donnees_2018[[i]]$.attrs)
}
for (i in 1:50) {
print(donnees_2018[[i]]$.attrs)
}
donnees_2019 <- xmlToList("C:/Users/wissem bbm/Documents/Stage/Ressources/donnees/PrixCarburants_annuel_2019.xml")
B<- spatial_year(donnees_2019)
library(plyr)
library(XML)
library(lubridate)
library(maps)
source("tables.R")
donnees_2019 <- xmlToList("C:/Users/wissem bbm/Documents/Stage/Ressources/donnees/PrixCarburants_annuel_2019.xml")
B<- spatial_year(donnees_2019)
names(donnees_2019)
names(donnees_2019[[1]])
names(donnees_2019[[1]]$.attrs)
donnees_2019[[1]]$.attrs["latitude"]
donnees_2019[[1]]$horaires
donnees_2019[[1]]$fermeture
source("tables.R")
B<- spatial_year(donnees_2019)
source("tables.R")
B<- spatial_year(donnees_2019)
source("tables.R")
B<- spatial_year(donnees_2019)
source("tables.R")
donnees_2019[[1]]
B<- spatial_year(donnees_2019)
source("tables.R")
B<- spatial_year(donnees_2019)
source("tables.R")
B<- spatial_year(donnees_2019)
rm(list=ls())
library(plyr)
library(XML)
library(lubridate)
library(maps)
source("tables.R")
donnes_2007 <- xmlToList("C:/Users/wissem bbm/Documents/Stage/Ressources/donnees/PrixCarburants_annuel_2007.xml")
donnees_2008 <- xmlToList("C:/Users/wissem bbm/Documents/Stage/Ressources/donnees/PrixCarburants_annuel_20008.xml")
donnees_2008 <- xmlToList("C:/Users/wissem bbm/Documents/Stage/Ressources/donnees/PrixCarburants_annuel_2008.xml")
View(spatial_year(donnees_2008))
source("tables.R")
View(spatial_year(donnees_2008))
donnees_2020 <- xmlToList("C:/Users/wissem bbm/Documents/Stage/Ressources/donnees/PrixCarburants_annuel_2020.xml")
View(spatial_year(donnees_2020))
donnees_2020[[1]]$adresse
donnees_2020[[1]]$ville
donnees_2020[[1]]$services
donnees_2020[[1]]$prix
donnees_2020[[1]]$.attrs
source("tables.R")
B<- spatial_year(donnees_2020)
donnees_2020[[1]]$.attrs["id"]
as.numeric(donnees_2020[[1]]$.attrs["latitude"])/100000
donnees_2020[[1]]$horaires
donnees_2020[[10000]]$horaires
View(fermeture(donnees_2020))
View(Price_update(donnees_2020,2))
donnees_2020[[10000]]$.attrs
donnees_2020[[10000]]$.attrs["cp"]
source("tables.R")
B<- spatial_year(donnees_2020)
source("tables.R")
B<- spatial_year(donnees_2020)
idx=which((B$lon>(-10))&(B$lon<20)&(B$lat>35)&(B$lat<55))
B=B[idx,]
Q=quantile(B$Prix,seq(0,1,by=.01),na.rm=TRUE)
Q[1]=0
x=as.numeric(cut(B$Prix,breaks=unique(Q)))
CL=c(rgb(0,0,1,seq(1,0,by=-.025)),rgb(1,0,0,seq(0,1,by=.025)))
plot(B$lon,B$lat,pch=19,col=CL[x],cex=0.05)
map("france")
points(B$lon,B$lat,pch =19,col=CL[x],cex=0.05)
plot(B$lon,B$lat,pch=19,col=CL[x],cex=0.05)
map("france")
points(B$lon,B$lat,pch =19,col=CL[x],cex=0.05)
map("france")
points(B$lon,B$lat,pch =19,col=CL[x],cex=0.05,xlab="longitude")
plot(B$lon,B$lat,pch=19,col=CL[x],cex=0.05)
map("france")
points(B$lon,B$lat,pch =19,col=CL[x],cex=0.05)
text("Prix moyen par station 2019")
map("france")
points(B$lon,B$lat,pch =19,col=CL[x],cex=0.05)
text("Prix moyen par station 2019")
map("france")
points(B$lon,B$lat,pch =19,col=CL[x],cex=0.05,title="Prix moyen par station 2019")
rm(list=ls())
library(plyr)
library(XML)
library(lubridate)
library(maps)
source("tables.R")
donnees_2007 <- xmlToList("C:/Users/wissem bbm/Documents/Stage/Ressources/donnees/PrixCarburants_annuel_2007.xml")
B<- spatial_year(donnees_2007)
idx=which((B$lon>(-10))&(B$lon<20)&(B$lat>35)&(B$lat<55))
B=B[idx,]
Q=quantile(B$Prix,seq(0,1,by=.01),na.rm=TRUE)
Q[1]=0
x=as.numeric(cut(B$Prix,breaks=unique(Q)))
CL=c(rgb(0,0,1,seq(1,0,by=-.025)),rgb(1,0,0,seq(0,1,by=.025)))
map("france")
points(B$lon,B$lat,pch =19,col=CL[x],cex=0.05)
donnees_2008 <- xmlToList("C:/Users/wissem bbm/Documents/Stage/Ressources/donnees/PrixCarburants_annuel_2008.xml")
B<- spatial_year(donnees_2008)
idx=which((B$lon>(-10))&(B$lon<20)&(B$lat>35)&(B$lat<55))
B=B[idx,]
Q=quantile(B$Prix,seq(0,1,by=.01),na.rm=TRUE)
Q[1]=0
x=as.numeric(cut(B$Prix,breaks=unique(Q)))
CL=c(rgb(0,0,1,seq(1,0,by=-.025)),rgb(1,0,0,seq(0,1,by=.025)))
map("france")
points(B$lon,B$lat,pch =19,col=CL[x],cex=0.05)
rm(list=ls())
library(plyr)
library(XML)
library(lubridate)
library(maps)
source("tables.R")
donnees_2018 <- xmlToList("C:/Users/wissem bbm/Documents/Stage/Ressources/donnees/PrixCarburants_annuel_2018.xml")
B<- spatial_year(donnees_2008)
idx=which((B$lon>(-10))&(B$lon<20)&(B$lat>35)&(B$lat<55))
B=B[idx,]
Q=quantile(B$Prix,seq(0,1,by=.01),na.rm=TRUE)
Q[1]=0
x=as.numeric(cut(B$Prix,breaks=unique(Q)))
CL=c(rgb(0,0,1,seq(1,0,by=-.025)),rgb(1,0,0,seq(0,1,by=.025)))
B<- spatial_year(donnees_2008)
B<- spatial_year(donnees_2018)
names(donnees_2018)
names(donnees_2018[[1]])
donnees_2020 <- xmlToList("C:/Users/wissem bbm/Documents/Stage/Ressources/donnees/PrixCarburants_annuel_2020.xml")
B<- spatial_year(donnees_2020)
idx=which((B$lon>(-10))&(B$lon<20)&(B$lat>35)&(B$lat<55))
B=B[idx,]
Q=quantile(B$Prix,seq(0,1,by=.01),na.rm=TRUE)
Q[1]=0
x=as.numeric(cut(B$Prix,breaks=unique(Q)))
CL=c(rgb(0,0,1,seq(1,0,by=-.025)),rgb(1,0,0,seq(0,1,by=.025)))
map("france")
points(B$lon,B$lat,pch =19,col=CL[x],cex=0.05)
names(donnees_2018[[1]]$.attrs)
names(donnees_2018[[1]]$services)
donnees_2018[[1]]$services
rm(list=ls())
library(plyr)
library(XML)
library(lubridate)
library(maps)
source("tables.R")
donnees_2012 <- xmlToList("C:/Users/wissem bbm/Documents/Stage/Ressources/donnees/PrixCarburants_annuel_2012.xml")
B<- spatial_year(donnees_2012)
B<- spatial_year(donnees_2012)
idx=which((B$lon>(-10))&(B$lon<20)&(B$lat>35)&(B$lat<55))
B=B[idx,]
Q=quantile(B$Prix,seq(0,1,by=.01),na.rm=TRUE)
Q[1]=0
x=as.numeric(cut(B$Prix,breaks=unique(Q)))
CL=c(rgb(0,0,1,seq(1,0,by=-.025)),rgb(1,0,0,seq(0,1,by=.025)))
plot(B$lon,B$lat,pch=19,col=CL[x],cex=0.05)
map("france")
points(B$lon,B$lat,pch =19,col=CL[x],cex=0.05)
rm(list=ls())
library(plyr)
library(XML)
library(lubridate)
library(maps)
source("tables.R")
donnees_2018 <- xmlToList("C:/Users/wissem bbm/Documents/Stage/Ressources/donnees/PrixCarburants_annuel_2018.xml")
B<- spatial_year(donnees_2018)
View(fermeture(donnees_2018))
View(Price_update(donnees_2018,2))
View(stock(donnees_2018))
View(spatial_year(donnees_2018))
rm(list=ls())
library(plyr)
library(XML)
library(lubridate)
library(maps)
source("tables.R")
donnees_2018 <- xmlToList("C:/Users/wissem bbm/Documents/Stage/Ressources/donnees/PrixCarburants_annuel_2018.xml")
donnees_2007 <- xmlToList("C:/Users/wissem bbm/Documents/Stage-2A/Ressources/donnees/PrixCarburants_annuel_2007.xml")
View(spatial_year(donnees_2007))
View(fermeture(donnees_2007))
View(stock(donnees_2007))
View(Price_update(donnees_2007,2))
B<- spatial_year(donnees_2007)
idx=which((B$lon>(-10))&(B$lon<20)&(B$lat>35)&(B$lat<55))
B=B[idx,]
Q=quantile(B$Prix,seq(0,1,by=.01),na.rm=TRUE)
Q[1]=0
x=as.numeric(cut(B$Prix,breaks=unique(Q)))
CL=c(rgb(0,0,1,seq(1,0,by=-.025)),rgb(1,0,0,seq(0,1,by=.025)))
plot(B$lon,B$lat,pch=19,col=CL[x],cex=0.05)
map("france")
points(B$lon,B$lat,pch =19,col=CL[x],cex=0.05)
map("france")
points(B$lon,B$lat,pch =19,col=CL[x],cex=0.05)
